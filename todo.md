- [x] Stabilize string quoting helpers with comprehensive tests
  - [x] Add unit tests covering escape/unescape nominal, edge, and error paths
  - [x] Introduce integration test exercising quote/unquote via agent command flow
  - [x] Document helper behaviour in relevant context.md files
- [x] Consolidate browse command networking and improve coverage
  - [x] Refactor runBrowse to reuse a single fetch implementation
  - [x] Add unit tests for timeout, error handling, and fetch polyfill paths
  - [x] Update command documentation and context summaries
- [x] Modularize agent loop for maintainability
  - [x] Identify cohesive subsets (rendering, approvals, execution) and extract dedicated modules
  - [x] Adjust integration tests and mocks to new module boundaries
  - [x] Document new architecture in src/agent/context.md
- [x] Strengthen approval safety and coverage
  - [x] Audit regex heuristics and add tests for emerging shell-injection patterns
  - [x] Add validation layer for templates/shortcuts command payloads
  - [x] Expand integration scenarios for approval rejections and preapproved commands
- [x] Refresh operational documentation and context indexes
  - [x] Remove deprecated modernization roadmap references
  - [x] Add cross-links between docs and implementation hotspots
  - [x] Clarify maintenance process for prompt copies and context indexes
- [x] Introduce schema validation and sync safeguards for JSON assets
  - [x] Define JSON schemas for prompts, templates, and shortcuts
  - [x] Add validation step to CI or startup flow
  - [x] Automate prompt copy synchronization checks
- [x] Improve OpenAI client robustness
  - [x] Add configuration validation for model/endpoint compatibility
  - [x] Implement per-request timeout/retry options with tests
  - [x] Document configuration expectations in src/openai/context.md
