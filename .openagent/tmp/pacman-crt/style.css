:root {
  --scale: 4; /* 224x248 scaled */
  --w: calc(224px * var(--scale));
  --h: calc(248px * var(--scale));
  --scanline-alpha: 0.16;
  --flicker-alpha: 0.07;
  --vignette: rgba(0,0,0,0.55);
  --glow: rgba(255,255,255,0.06);
}
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; background: #000; color: #8af;
  display: grid; place-items: center; font-family: system-ui, sans-serif;
}
.screen-wrap { width: var(--w); height: var(--h); display: grid; place-items: center; }
.crt {
  position: relative; width: var(--w); height: var(--h);
  display: block; overflow: hidden;
  /* tube curvature + subtle perspective */
  transform: perspective(900px) rotateX(1.2deg) rotateY(-0.6deg);
  border-radius: 14px; box-shadow: 0 0 32px #021 inset, 0 0 120px #0cf6;
  background: radial-gradient(120% 100% at 50% 50%, #021 0%, #000 60%, #000 100%);
  animation: crt-hum 6s infinite linear;
}
canvas#game {
  width: 100%; height: 100%; image-rendering: pixelated; image-rendering: crisp-edges;
  display: block; filter: contrast(1.15) saturate(1.08);
}
/* scanlines */
.crt::before {
  content: ""; position: absolute; inset: 0; pointer-events: none;
  background: repeating-linear-gradient(
    to bottom,
    rgba(0,0,0, var(--scanline-alpha)) 0px,
    rgba(0,0,0, var(--scanline-alpha)) 2px,
    rgba(0,0,0, 0.02) 3px,
    rgba(255,255,255, 0.01) 4px
  );
  mix-blend-mode: multiply; animation: scan-flicker 120ms infinite steps(2, end);
}
/* vignette and soft glow */
.crt::after {
  content: ""; position: absolute; inset: 0; pointer-events: none;
  background:
    radial-gradient(120% 120% at 50% 50%, rgba(255,255,255,0.0), var(--glow) 40%, rgba(0,0,0,0.15) 60%, var(--vignette) 100%);
  mix-blend-mode: overlay;
}
@keyframes scan-flicker {
  0% { opacity: 1; }
  50% { opacity: calc(1 - var(--flicker-alpha)); }
  100% { opacity: 1; }
}
@keyframes crt-hum {
  0% { filter: hue-rotate(0deg) brightness(1); }
  50% { filter: hue-rotate(-1deg) brightness(0.995); }
  100% { filter: hue-rotate(0deg) brightness(1); }
}
/* subtle vertical jitter (simulate degauss wobble) */
.crt { animation: crt-warp 12s infinite ease-in-out; }
@keyframes crt-warp {
  0%, 100% { transform: perspective(900px) rotateX(1.2deg) rotateY(-0.6deg) translateY(0px); }
  50% { transform: perspective(900px) rotateX(1.4deg) rotateY(-0.5deg) translateY(-0.6px); }
}
