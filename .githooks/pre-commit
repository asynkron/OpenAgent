#!/usr/bin/env bash
set -euo pipefail

# Exit early when there are no staged changes to keep commits snappy.
if git diff --cached --quiet; then
  exit 0
fi

# lint-staged handles running Prettier and ESLint with --fix on staged files only.
if command -v npx >/dev/null 2>&1; then
  npx --no-install lint-staged
else
  echo "pre-commit hook: npx is not available; skipping format+lint." >&2
fi
